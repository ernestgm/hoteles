<script>

    function UserService($filter){
        var service = {};

        service.GetAll = GetAll;
        service.GetById = GetById;
        service.Save = Save;

        return service;

        function GetAll() {
            return getUsers();
        }

        function GetById(id) {
            var filtered = $filter('filter')(getUsers(), { id: id });
            var user = filtered.length ? filtered[0] : null;

            return user;
        }

        function getUsers() {
            if (!localStorage.users) {
                localStorage.users = JSON.stringify([]);
            }

            return JSON.parse(localStorage.users);
        }

        function Save(users) {
            localStorage.users = JSON.stringify(users);
            return;
        }

    }

    function WSHotelService($filter){
        var wsservice = {};

        wsservice.GetAll = GetAll;
        wsservice.GetById = GetById;
        wsservice.Save = Save;

        return wsservice;

        function GetAll() {
            return getData();
        }

        function GetById(id) {
            var filtered = $filter('filter')(getData(), { id: id });
            var data = filtered.length ? filtered[0] : null;

            return data;
        }

        function getData() {
            if (!localStorage.wshotels) {
                localStorage.wshotels = JSON.stringify([]);
            }

            return JSON.parse(localStorage.wshotels);
        }

        function Save(item) {
            localStorage.wshotels = JSON.stringify(item);
            return;
        }

    }

    angular
            .module('inspinia')
            .factory('UserService', UserService)
            .factory('WSHotelService', WSHotelService);
</script>